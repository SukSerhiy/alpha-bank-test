(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{137:function(e,t,n){e.exports=n(398)},142:function(e,t,n){},149:function(e,t,n){},370:function(e,t,n){},371:function(e,t,n){},392:function(e,t,n){},398:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(7),c=n.n(o),u=(n(142),n(6)),s=n.n(u),i=n(12),l=n(13),p=n(14),h=n(17),f=n(15),m=n(16),d=n(41),v=function(e){return function(t){t({type:"SET_PHOTOS",payload:e})}},b=function(e){return function(t){t({type:"SET_MORE_PHOTOS",payload:e})}},O=function(e){return function(t){t({type:"SET_ALBUM_ID",payload:e})}},y=function(e){return function(t){t({type:"SET_SEARCH_STR",payload:e})}},g=function(e){return function(t){t({type:"SET_PAGE",payload:e})}},S=function(){var e=Object(i.a)(s.a.mark(function e(t){var n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object.keys(t).filter(function(e){return null!==t[e]}).reduce(function(e,n,r,a){var o="";0===r&&(o+="?");var c=t[n];return"page"===n?o+="_page=".concat(c):"limit"===n?o+="_limit=".concat(c):"searchStr"===n?o+="q=".concat(encodeURIComponent(c)):"albumId"===n&&(o+="albumId=".concat(c)),r<a.length-1&&(o+="&"),e+o},"https://jsonplaceholder.typicode.com/photos"),e.next=3,fetch(n);case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(i.a)(s.a.mark(function e(t){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://jsonplaceholder.typicode.com/albums/".concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),E=function(e){var t=e.item,n=t.title,r=t.thumbnailUrl;return a.a.createElement("div",{className:"gallery-item"},a.a.createElement("img",{alt:n,src:r}),a.a.createElement("div",{className:"note"},a.a.createElement("span",null,n)),a.a.createElement("div",{className:"overlay"},a.a.createElement("div",{className:"info-icon",onMouseDown:function(){var t=e.item;(0,e.showInfo)(t)},onMouseLeave:function(){(0,e.hideInfo)()}})))},w=n(136),I=(n(149),2e3),P=function(e,t){return a.a.createElement("div",null,a.a.createElement("span",null,e,": "),a.a.createElement("span",null,t))},k=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).state={title:null,albumId:null,isShowed:!1,loading:!1},n.show=function(){var e=Object(i.a)(s.a.mark(function e(t){var r,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return clearTimeout(n.timerId),r=t.albumId,e.next=4,j(r);case 4:a=e.sent,n.setState({photoInfo:Object(w.a)({},t,{album:a.title}),isShowed:!0});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.hide=function(){n.timerId=setTimeout(function(){n.setState({photoInfo:null,isShowed:!1})},I)},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentWillUnmount",value:function(){clearTimeout(this.timerId)}},{key:"render",value:function(){var e=this.state.photoInfo;return a.a.createElement(r.Fragment,null,this.state.isShowed&&a.a.createElement("div",{id:"photo-info-alert"},P("Title",e.title),P("Album",e.album)))}}]),t}(r.Component),x=n(50),A=(n(370),function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).state={loading:!1},n.setStateAsync=function(e){return new Promise(function(t){n.setState(e,t)})},n.loadData=Object(i.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.loadData,e.next=3,n.setStateAsync({loading:!0});case 3:return e.next=5,t();case 5:return e.next=7,n.setStateAsync({loading:!1});case 7:case"end":return e.stop()}},e)})),n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state.loading?"loading":null;return a.a.createElement("div",{className:"load-more"},a.a.createElement(x.Button,{icon:e,onClick:this.loadData},"Load more"))}}]),t}(r.Component)),T=(n(371),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(h.a)(this,Object(f.a)(t).call(this,e))).showInfo=function(e){n.photoInfoRef.current.show(e)},n.hideInfo=function(){n.photoInfoRef.current.hide()},n.photoInfoRef=a.a.createRef(),n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.photos,r=t.loadMorePhotos;return a.a.createElement("div",{className:"gallery"},a.a.createElement("div",{className:"gallery-items"},n.map(function(t,n){return a.a.createElement(E,{key:n,showInfo:e.showInfo,hideInfo:e.hideInfo,item:t})})),a.a.createElement(k,{ref:this.photoInfoRef}),a.a.createElement(A,{loadData:r}))}}]),t}(r.Component)),C=32,_=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).getPhotos=function(){var e=Object(i.a)(s.a.mark(function e(t){var r,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props.setPhotos,n.resetPage(),e.next=4,S(t);case 4:a=e.sent,r(a);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.resetPage=function(){(0,n.props.setPage)(1)},n.getMorePhotos=Object(i.a)(s.a.mark(function e(){var t,r,a,o,c,u,i,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.page,a=t.setMorePhotos,o=t.setPage,c=t.albumId,u=t.searchStr,o(i=r+1),e.next=6,S({page:i,limit:C,albumId:c,searchStr:u});case 6:l=e.sent,a(l);case 8:case"end":return e.stop()}},e)})),n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.page;this.getPhotos({page:e,limit:C})}},{key:"render",value:function(){var e=this.props.photos;return a.a.createElement(T,{photos:e,loadMorePhotos:this.getMorePhotos})}}]),t}(r.Component),R=Object(d.b)(function(e){var t=e.toJS();return{photos:t.photos,page:t.page,albumId:t.albumId,searchStr:t.searchStr}},function(e){return{setPhotos:function(t){return e(v(t))},setMorePhotos:function(t){return e(b(t))},setPage:function(t){return e(g(t))}}})(_),M=function(){var e=Object(i.a)(s.a.mark(function e(t){var n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object.keys(t).filter(function(e){return null!==t[e]}).reduce(function(e,n,r,a){var o="";0===r&&(o+="?");var c=t[n];return"page"===n?o+="_page=".concat(c):"limit"===n?o+="_limit=".concat(c):"searchStr"===n&&(o+="q=".concat(encodeURIComponent(c))),r<a.length-1&&(o+="&"),e+o},"https://jsonplaceholder.typicode.com/albums"),e.next=3,fetch(n);case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),D=n(130),N=n.n(D),L=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).loadOptions=function(){var e=Object(i.a)(s.a.mark(function e(t,r){var a,o,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props.queryAutocomplete,e.next=3,a(t||"");case 3:o=e.sent,c=o.map(function(e){return{label:e.title,value:e.id}}),r(c);case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),n.onChange=function(e){(0,n.props.onSelect)(e?e.value:null)},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"filter"},a.a.createElement(N.a,{placeholder:"Album",loadOptions:this.loadOptions,onChange:this.onChange,isClearable:!0,defaultOptions:!0}))}}]),t}(r.Component),U=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(h.a)(this,Object(f.a)(t).call(this,e))).state={value:null},n.onChange=function(e){n.setState({value:e})},n.onKeyPress=function(e){console.log(e.key),"Enter"===e.key&&(n.inputRef.current.blur(),n.onEnter())},n.onEnter=function(){(0,n.props.onEnter)(n.state.value)},n.inputRef=a.a.createRef(),n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state.value;return a.a.createElement(x.Input,{ref:this.inputRef,placeholder:"Search",value:e,onChange:this.onChange,onKeyPress:this.onKeyPress,append:a.a.createElement(x.Button,{type:"primary",icon:"search",onClick:this.onEnter},"Search")})}}]),t}(r.Component),q=function(e){var t=e.queryAutocomplete,n=e.onFilterSelect,r=e.onSearchEnter;return a.a.createElement("div",{className:"controls"},a.a.createElement(L,{queryAutocomplete:t,onSelect:n}),a.a.createElement("div",{className:"search-input"},a.a.createElement(U,{onEnter:r})))},H=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).setAlbumId=function(e){(0,n.props.setAlbumId)(e)},n.setSearchString=function(e){(0,n.props.setSearchStr)(e)},n.getPhotos=Object(i.a)(s.a.mark(function e(){var t,r,a,o,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.setPhotos,a=t.searchStr,o=t.albumId,e.next=3,S({page:1,limit:10,searchStr:a,albumId:o});case 3:c=e.sent,r(c);case 5:case"end":return e.stop()}},e)})),n.getAlbums=Object(i.a)(s.a.mark(function e(){var t,n,r=arguments;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",e.next=3,M({page:1,limit:10,searchStr:t});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e)})),n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidUpdate",value:function(e){e.searchStr!==this.props.searchStr&&this.getPhotos(),e.albumId!==this.props.albumId&&this.getPhotos()}},{key:"render",value:function(){return a.a.createElement(q,{queryAutocomplete:this.getAlbums,onFilterSelect:this.setAlbumId,onSearchEnter:this.setSearchString})}}]),t}(r.Component),B=Object(d.b)(function(e){var t=e.toJS();return{photos:t.photos,albumId:t.albumId,searchStr:t.searchStr}},function(e){return{setPhotos:function(t){return e(v(t))},setAlbumId:function(t){return e(O(t))},setSearchStr:function(t){return e(y(t))}}})(H),J=(n(392),function(e){return a.a.createElement("main",null,a.a.createElement(B,null),a.a.createElement(R,null))}),F=n(40),K=n(132),G=n(133),W=n(134),z=n(29),Q=Object(W.combineReducers)({photos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(z.List)([]),t=arguments.length>1?arguments[1]:void 0,n=t.payload||[];switch(t.type){case"SET_PHOTOS":return Object(z.List)(n);case"SET_MORE_PHOTOS":return e.concat(Object(z.List)(n));default:return e}},albumId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ALBUM_ID":return t.payload;default:return e}},searchStr:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SEARCH_STR":return t.payload;default:return e}},page:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PAGE":return t.payload;default:return e}}}),V=z.default.fromJS({photos:[],page:1,albumId:null,searchStr:null});n(397);c.a.render(a.a.createElement(d.a,{store:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V;return Object(F.createStore)(Q,e,Object(K.composeWithDevTools)(Object(F.applyMiddleware)(G.a)))}()},a.a.createElement(J,null)),document.getElementById("root"))}},[[137,1,2]]]);
//# sourceMappingURL=main.963a31c1.chunk.js.map